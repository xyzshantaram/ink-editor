<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Ink Demo</title>
    <link rel=stylesheet href="./dist/ink-editor.css">
</head>

<body>
    <script type="module">
        import { debounce, init } from "./dist/ink-editor.min.js";
        import { marked } from "https://esm.sh/marked";
        import { confirm } from "https://esm.sh/cf-alert";

        const verticalMode = await confirm('Do you want to try vertical (compact) mode or sidebar mode?', {
            yes: "Vertical mode",
            no: "Sidebar mode"
        }, "Demo mode selection")

        const DEFAULT_CONTENT = await fetch('https://raw.githubusercontent.com/xyzshantaram/ink-editor/master/README.md')
            .then(res => res.ok ? res.text() : '# Editor Demo');

        const { editor, setVal, getVal } = await init(
            document.body, // parent element to append to
            DEFAULT_CONTENT, // default markdown content
            [],
            "This string shows when the editor is empty.", // placeholder to use
            {
                autosave: debounce((text) => localStorage.setItem("contents", text), 1000),
                retrieve: () => localStorage.getItem('contents'),
                done: (text) => console.log(`done clicked with content ${text}`),
                exit: (_) => console.log("received exit request"),
                parse: marked.parse,
                disablePrompts: true,
                verticalMode,
                height: 'calc(100vh - 1rem)'
            }
        );
    </script>
</body>

</html>